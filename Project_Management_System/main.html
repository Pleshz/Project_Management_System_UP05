<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="https://fonts.googleapis.com/css?family=Roboto:400,500,700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles/style.css" />
    <link rel="stylesheet" href="styles/sidebar.css">
    <title>Project Manager</title>
</head>
<body>
<div class="main-root-layout">
  <aside class="icon-sidebar">
    <nav class="icon-sidebar-nav sidebar-nav" aria-label="–ù–∞–≤–∏–≥–∞—Ü–∏—è">
      <ul>
        <li class="sidebar-btn active" data-section="profile" aria-label="–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç" title="–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç"><span class="nav-icon">üë§</span></li>
        <li class="sidebar-btn" data-section="employees" aria-label="–í—Å–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏" title="–í—Å–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏"><span class="nav-icon">üë•</span></li>
        <li class="sidebar-btn" data-section="projects" aria-label="–ü—Ä–æ–µ–∫—Ç—ã" title="–ü—Ä–æ–µ–∫—Ç—ã"><span class="nav-icon">üìÅ</span></li>
        <li class="sidebar-btn" data-section="tasks" aria-label="–ú–æ–∏ –∑–∞–¥–∞—á–∏" title="–ú–æ–∏ –∑–∞–¥–∞—á–∏"><span class="nav-icon">üìù</span></li>
        <li class="sidebar-btn" data-section="extra" aria-label="–ß—Ç–æ-—Ç–æ –µ—â—ë" title="–ß—Ç–æ-—Ç–æ –µ—â—ë"><span class="nav-icon">‚ö°</span></li>
      </ul>
    </nav>
    <div class="icon-sidebar-bottom">
      <button class="sidebar-btn theme-btn" id="theme-btn-sidebar" title="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É" aria-label="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É"><span class="theme-icon">üåô</span></button>
    </div>
  </aside>
  <main class="main-content" id="app-content">
    <!-- –ö–æ–Ω—Ç–µ–Ω—Ç -->
  </main>
</div>

<div id="modal-task" class="modal-overlay" style="display:none;">
  <div class="modal-window">
    <form id="task-form">
      <div class="modal-header">
        <span class="modal-icon">üìù</span>
        <span class="modal-title" id="task-form-title">–°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É</span>
      </div>
      <div class="input-group">
        <label for="task-name">–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏</label>
        <input type="text" id="task-name" name="task-name" required placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏" />
      </div>
      <div class="input-group">
        <label for="task-desc">–û–ø–∏—Å–∞–Ω–∏–µ</label>
        <textarea id="task-desc" name="task-desc" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏"></textarea>
      </div>
      <div class="input-group">
        <label for="task-date">–î–∞—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è</label>
        <input type="date" id="task-date" name="task-date" required />
      </div>
      <div class="input-group">
        <label for="task-status">–°—Ç–æ–ª–±–µ—Ü</label>
        <select id="task-status" name="task-status" required>
          <option value="new">–ù–æ–≤—ã–µ</option>
          <option value="inprogress">–í –ø—Ä–æ—Ü–µ—Å—Å–µ</option>
          <option value="review">–ú–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å</option>
          <option value="done">–ì–æ—Ç–æ–≤–æ</option>
        </select>
      </div>
      <div class="input-group">
        <label for="subtask-input">–ü–æ–¥–∑–∞–¥–∞—á–∏</label>
        <div style="display:flex;gap:0.5em;margin-bottom:.5em;">
          <input type="text" id="subtask-input" placeholder="–¢–µ–∫—Å—Ç –ø–æ–¥–∑–∞–¥–∞—á–∏..." style="flex:1 1 auto;">
          <button type="button" id="add-subtask-btn" class="btn mini">+</button>
        </div>
        <ul id="subtasks-list" style="list-style:none;padding:0;margin:0;min-height:2em;"></ul>
      </div>
      <div class="modal-actions">
        <button type="button" class="btn mini" id="task-cancel">–û—Ç–º–µ–Ω–∞</button>
        <button type="submit" class="btn primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </div>
    </form>
  </div>
</div>

<div id="modal-task-view" class="modal-overlay" style="display:none;">
  <div class="modal-window" style="max-width:420px;">
    <div class="modal-header">
      <span class="modal-icon">üìã</span>
      <span class="modal-title" id="task-view-title">–î–µ—Ç–∞–ª–∏ –∑–∞–¥–∞—á–∏</span>
    </div>
    <div class="modal-content" id="task-view-content">
      <!-- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –≤—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∑–∞–¥–∞—á–∏ -->
    </div>
    <div class="modal-actions">
      <button type="button" class="btn mini" id="task-view-close">–ó–∞–∫—Ä—ã—Ç—å</button>
    </div>
  </div>
</div>

<div id="modal-employee" class="modal-overlay" style="display:none;">
  <div class="modal-window">
    <form id="employee-form">
      <div class="modal-header">
        <span class="modal-icon">üë§</span>
        <span class="modal-title" id="employee-form-title">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞</span>
      </div>
      <div class="input-group">
        <label for="emp-name">–§–ò–û</label>
        <input type="text" id="emp-name" name="emp-name" required placeholder="–§–ò–û —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞" />
      </div>
      <div class="input-group">
        <label for="emp-email">–ü–æ—á—Ç–∞</label>
        <input type="email" id="emp-email" name="emp-email" required placeholder="Email —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞" />
      </div>
      <div class="input-group">
        <label for="emp-bio">–ë–∏–æ–≥—Ä–∞—Ñ–∏—è</label>
        <textarea id="emp-bio" name="emp-bio" placeholder="–û —Å–µ–±–µ" rows="2"></textarea>
      </div>
      <div class="input-group">
        <label for="emp-role">–†–æ–ª—å</label>
        <select id="emp-role" name="emp-role" required>
          <option value="user">user</option>
          <option value="admin">admin</option>
        </select>
      </div>
      <div class="modal-actions">
        <button type="button" class="btn mini" id="employee-cancel">–û—Ç–º–µ–Ω–∞</button>
        <button type="submit" class="btn primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </div>
    </form>
  </div>
</div>

<div id="modal-profile" class="modal-overlay" style="display:none;">
  <div class="modal-window">
    <form id="profile-form">
      <div class="modal-header">
        <span class="modal-icon">üë§</span>
        <span class="modal-title" id="profile-form-title">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å</span>
      </div>
      <div class="input-group">
        <label for="profile-name">–§–ò–û</label>
        <input type="text" id="profile-name" name="profile-name" required placeholder="–í–∞—à–µ –§–ò–û" />
      </div>
      <div class="input-group">
        <label for="profile-email">–ü–æ—á—Ç–∞</label>
        <input type="email" id="profile-email" name="profile-email" required placeholder="–í–∞—à email" />
      </div>
      <div class="input-group">
        <label for="profile-bio">–ë–∏–æ–≥—Ä–∞—Ñ–∏—è</label>
        <textarea id="profile-bio" name="profile-bio" placeholder="–û —Å–µ–±–µ" rows="2"></textarea>
      </div>
      <div class="input-group">
        <label for="profile-password">–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å</label>
        <input type="password" id="profile-password" name="profile-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="new-password" />
      </div>
      <div class="input-group">
        <label for="profile-password2">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å</label>
        <input type="password" id="profile-password2" name="profile-password2" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" autocomplete="new-password" />
      </div>
      <div class="modal-actions">
        <button type="button" class="btn mini" id="profile-cancel">–û—Ç–º–µ–Ω–∞</button>
        <button type="submit" class="btn primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </div>
    </form>
  </div>
</div>

<div id="modal-delete-profile" class="modal-overlay" style="display:none;">
  <div class="modal-window">
    <div class="modal-header">
      <span class="modal-icon">‚ö†Ô∏è</span>
      <span class="modal-title">–£–¥–∞–ª–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç?</span>
    </div>
    <div class="modal-message">
      –í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —Å–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ!
    </div>
    <div class="modal-actions">
      <button type="button" class="btn mini" id="delete-cancel">–û—Ç–º–µ–Ω–∞</button>
      <button type="button" class="btn danger" id="delete-confirm">–£–¥–∞–ª–∏—Ç—å</button>
    </div>
  </div>
</div>

<div id="modal" class="modal-overlay" style="display:none;">
  <div class="modal-window">
    <div class="modal-header">
      <span id="modal-icon" class="modal-icon">‚ùó</span>
      <span id="modal-title" class="modal-title">–ó–∞–≥–æ–ª–æ–≤–æ–∫</span>
    </div>
    <div id="modal-message" class="modal-message">–¢–µ–∫—Å—Ç –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞</div>
    <div class="modal-actions">
      <button id="modal-cancel" class="btn mini">–û—Ç–º–µ–Ω–∞</button>
      <button id="modal-ok" class="btn danger">OK</button>
    </div>
  </div>
</div>

<div id="modal-project" class="modal-overlay" style="display:none;">
  <div class="modal-window">
    <form id="project-form">
      <div class="modal-header">
        <span class="modal-icon">üìã</span>
        <span class="modal-title" id="project-form-title">–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç</span>
      </div>
      <div class="input-group">
        <label for="proj-name">–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞</label>
        <input type="text" id="proj-name" name="proj-name" required placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ" />
      </div>
      <div class="input-group">
        <label for="proj-desc">–û–ø–∏—Å–∞–Ω–∏–µ</label>
        <textarea id="proj-desc" name="proj-desc" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞" rows="3"></textarea>
      </div>
      <div class="input-group">
        <label for="proj-public">–¢–∏–ø –ø—Ä–æ–µ–∫—Ç–∞</label>
        <select id="proj-public" name="proj-public" required>
          <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ç–∏–ø</option>
          <option value="–û—Ç–∫—Ä—ã—Ç—ã–π">–û—Ç–∫—Ä—ã—Ç—ã–π</option>
          <option value="–ó–∞–∫—Ä—ã—Ç—ã–π">–ó–∞–∫—Ä—ã—Ç—ã–π</option>
        </select>
      </div>
      <div class="modal-actions">
        <button type="button" class="btn mini" id="project-cancel">–û—Ç–º–µ–Ω–∞</button>
        <button type="submit" class="btn primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
      </div>
    </form>
  </div>
</div>

<script src="js/app.js"></script>
<script>
// --- –¢–µ–º–∞: —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º –∫–Ω–æ–ø–∫—É –≤ —Å–∞–π–¥–±–∞—Ä–µ ---
(function() {
  const root = document.documentElement;
  const themeBtnSidebar = document.getElementById('theme-btn-sidebar');
  const themeIconSidebar = themeBtnSidebar.querySelector('.theme-icon');

  function setTheme(theme) {
    if (theme === 'dark') {
      root.classList.add('dark-theme');
      themeIconSidebar.textContent = '‚òÄÔ∏è';
      themeBtnSidebar.setAttribute('data-theme', 'dark');
      localStorage.setItem('theme', 'dark');
    } else {
      root.classList.remove('dark-theme');
      themeIconSidebar.textContent = 'üåô';
      themeBtnSidebar.setAttribute('data-theme', 'light');
      localStorage.setItem('theme', 'light');
    }
  }

  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–º—ã –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
  const savedTheme = localStorage.getItem('theme');
  if (savedTheme === 'dark') {
    setTheme('dark');
  } else {
    setTheme('light');
  }

  themeBtnSidebar.addEventListener('click', function() {
    if (root.classList.contains('dark-theme')) {
      setTheme('light');
    } else {
      setTheme('dark');
    }
  });
})();

// --- JS-–Ω–∞–≤–∏–≥–∞—Ü–∏—è –¥–ª—è SPA-—Ä–µ–∂–∏–º–∞ ---
(function() {
  // –¢–µ–ø–µ—Ä—å –Ω–∞–≤–∏–≥–∞—Ü–∏—è –Ω–∞ <li> –≤–º–µ—Å—Ç–æ <button>
  const navBtns = document.querySelectorAll('.sidebar-nav .sidebar-btn[data-section]');
  const appContent = document.getElementById('app-content');
  function setActiveSection(section) {
    navBtns.forEach(btn => btn.classList.toggle('active', btn.dataset.section === section));
    // [–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ –±–ª–æ–∫–∞ –ø–æ section ‚Äî –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è]
    if (section === 'profile') {
      appContent.innerHTML = `
        <section class="profile section active">
          <h2>–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</h2>
          <div class="profile-block">
            <div class="profile-info">
              <div><b>–§–ò–û:</b> –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤</div>
              <div><b>–ü–æ—á—Ç–∞:</b> client@pm.ru</div>
              <div><b>–ë–∏–æ–≥—Ä–∞—Ñ–∏—è:</b> –†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å IT-–ø—Ä–æ–µ–∫—Ç–∞. –õ—é–±–ª—é Agile –∏ Kanban.</div>
            </div>
            <div class="profile-actions">
              <button class="btn">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
              <button class="btn danger">–£–¥–∞–ª–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç</button>
            </div>
          </div>
        </section>
      `;
    } else if (section === 'employees') {
      appContent.innerHTML = `
        <section class="employees section active">
          <h2>–í—Å–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏</h2>
          <div class="table-block">
            <table>
              <thead>
                <tr><th>–§–ò–û</th><th>–ü–æ—á—Ç–∞</th><th>–†–æ–ª—å</th></tr>
              </thead>
              <tbody>
                <!-- –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
              </tbody>
            </table>
          </div>
        </section>
      `;
    } else if (section === 'projects') {
      appContent.innerHTML = `
        <section class="projects section active">
          <h2>–ü—Ä–æ–µ–∫—Ç—ã</h2>
          <div class="table-block">
            <table>
              <thead>
                <tr><th>–ù–∞–∑–≤–∞–Ω–∏–µ</th><th>–¢–∏–ø</th><th>–û–ø–∏—Å–∞–Ω–∏–µ</th><th>–£—á–∞—Å—Ç–Ω–∏–∫–æ–≤</th><th></th></tr>
              </thead>
              <tbody><!-- –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ --></tbody>
            </table>
            <button class="btn primary" style="margin-top:1.3em;">–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç</button>
          </div>
        </section>
      `;
    } else if (section === 'tasks') {
      appContent.innerHTML = `
        <section class="tasks section active">
          <h2>–ú–æ–∏ –∑–∞–¥–∞—á–∏</h2>
          <input type="text" id="kanban-search" placeholder="–ü–æ–∏—Å–∫ –∑–∞–¥–∞—á..." class="kanban-search" style="max-width:300px;margin-bottom:1em;">
          <button class="btn primary" id="add-task-btn" style="margin-bottom:1.4em;">–°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É</button>
          <div class="kanban-board">
            <div class="kanban-col" data-status="new">
              <div class="kanban-col-title">–ù–æ–≤—ã–µ</div>
              <div class="kanban-cards" id="tasks-new"><!-- –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ --></div>
            </div>
            <div class="kanban-col" data-status="inprogress">
              <div class="kanban-col-title">–í –ø—Ä–æ—Ü–µ—Å—Å–µ</div>
              <div class="kanban-cards" id="tasks-inprogress"></div>
            </div>
            <div class="kanban-col" data-status="review">
              <div class="kanban-col-title">–ú–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å</div>
              <div class="kanban-cards" id="tasks-review"></div>
            </div>
            <div class="kanban-col" data-status="done">
              <div class="kanban-col-title">–ì–æ—Ç–æ–≤–æ</div>
              <div class="kanban-cards" id="tasks-done"></div>
            </div>
          </div>
        </section>
      `;
    } else if (section === 'extra') {
      appContent.innerHTML = `
        <section class="other section active">
          <h2>–ß—Ç–æ-—Ç–æ –µ—â—ë</h2>
          <p>–≠—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª –ø–æ–∫–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω.</p>
        </section>
      `;
    }
  }
  navBtns.forEach(btn => {
    btn.addEventListener('click', () => setActiveSection(btn.dataset.section));
  });
  setActiveSection('profile');
})();
</script>
</body>
</html>
